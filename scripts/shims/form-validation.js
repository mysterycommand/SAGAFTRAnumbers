webshims.register("form-validation",function(a,b,c,d,e,f){var g="webkitURL"in c,h=g&&Modernizr.formvalidation&&!b.bugs.bustedValidity,i=h&&parseFloat((navigator.userAgent.match(/Safari\/([\d\.]+)/)||["","999999"])[1],10),j="user-error",k="user-success",l={checkbox:1,radio:1},m=a([]),n=function(){return!a.prop(this,"form")},o=function(b){b=a(b);var c,e,f=m;return"radio"==b[0].type&&(e=b.prop("form"),c=b[0].name,f=c?e?a(e).jProp(c):a(d.getElementsByName(c)).filter(n):b,f=f.filter('[type="radio"]')),f},p=function(b,c){var d;return a.each(b,function(b,e){return e?(d=b+a.prop(c,"validationMessage"),!1):void 0}),d},q=function(a){var b;try{b=d.activeElement.name===a}catch(c){}return b},r={radio:1,checkbox:1,"select-one":1,"select-multiple":1,file:1,date:1,month:1,week:1,text:1},s={time:1,date:1,month:1,datetime:1,week:1,"datetime-local":1},t=function(c){var d,e,f,g;if(c.target&&(d=a(c.target).getNativeElement()[0],f=a(d).getShadowElement(),"submit"!=d.type&&a.prop(d,"willValidate")&&("change"!=c.type||r[g=f.prop("type")]))){e=a.data(d,"webshimsswitchvalidityclass");var m=function(){if(g||(g=f.prop("type")),!(h&&("change"==c.type||537.36>i)&&s[g]&&a(c.target).is(":focus")||"focusout"==c.type&&"radio"==d.type&&q(d.name))){var e,m,n,r,t,u=a.prop(d,"validity");b.refreshCustomValidityRules&&b.refreshCustomValidityRules(d),u.valid?f.hasClass(k)||(e=k,m=j,r="changedvaliditystate",n="changedvalid",l[d.type]&&d.checked&&o(d).not(d).removeClass(m).addClass(e).removeAttr("aria-invalid"),f.removeAttr("aria-invalid"),a.removeData(d,"webshimsinvalidcause")):(t=p(u,d),a.data(d,"webshimsinvalidcause")!=t&&(a.data(d,"webshimsinvalidcause",t),r="changedvaliditystate"),f.hasClass(j)||(e=j,m=k,l[d.type]&&!d.checked&&o(d).not(d).removeClass(m).addClass(e).attr("aria-invalid","true"),f.attr("aria-invalid","true"),n="changedinvalid")),e&&(f.addClass(e).removeClass(m),setTimeout(function(){a(d).trigger(n)},0)),r&&setTimeout(function(){a(d).trigger(r)},0),a.removeData(d,"webshimsswitchvalidityclass")}};e&&clearTimeout(e),"refreshvalidityui"==c.type?m():a.data(d,"webshimsswitchvalidityclass",setTimeout(m,9))}};a(d.body).on(f.validityUIEvents||"focusout change refreshvalidityui invalid",t).on("reset resetvalui",function(b){var c=a(b.target);"reset"==b.type&&(c=c.filter("form").jProp("elements")),c.filter(".user-error, .user-success").removeAttr("aria-invalid").removeClass("user-error").removeClass("user-success").getNativeElement().each(function(){a.removeData(this,"webshimsinvalidcause")}).trigger("resetvalidityui")});var u=function(){b.scrollRoot=g||"BackCompat"==d.compatMode?a(d.body):a(d.documentElement)},v=Modernizr.boxSizing||Modernizr["display-table"]||a.support.getSetAttribute?"minWidth":"width",w="transitionDelay"in d.documentElement.style;u(),b.ready("DOM",u),b.getRelOffset=function(b,c){b=a(b);var d,e=a(c).offset();return a.swap(a(b)[0],{visibility:"hidden",display:"inline-block",left:0,top:0},function(){d=b.offset()}),e.top-=d.top,e.left-=d.left,e},a.extend(b.wsPopover,{isInElement:function(b,c){return b==c||a.contains(b,c)},show:function(b){var e=a.Event("wspopoverbeforeshow");if(this.element.trigger(e),!e.isDefaultPrevented()&&!this.isVisible){this.isVisible=!0,b=a(b||this.options.prepareFor).getNativeElement();var f=this,g=a(b).getShadowElement();this.clear(),this.element.removeClass("ws-po-visible").css("display","none"),this.prepareFor(b,g),this.position(g),f.timers.show=setTimeout(function(){f.element.css("display",""),f.timers.show=setTimeout(function(){f.element.addClass("ws-po-visible").trigger("wspopovershow")},9)},9),this.element.on("remove",function(a){a.originalEvent||f.destroy()}),a(d).on("focusin"+this.eventns+" mousedown"+this.eventns,function(a){!f.options.hideOnBlur||f.stopBlur||f.isInElement(f.lastElement[0]||d.body,a.target)||f.isInElement(b[0]||d.body,a.target)||f.isInElement(f.element[0],a.target)||f.hide()}),a(c).on("resize"+this.eventns+" pospopover"+this.eventns,function(){clearTimeout(f.timers.repos),f.timers.repos=setTimeout(function(){f.position(g)},400)})}},prepareFor:function(b,c){var d,e=a.extend({},this.options,a(b.prop("form")||[]).data("wspopover")||{},b.data("wspopover")),f=this,g={};this.lastElement=a(b).getShadowFocusElement(),this.prepared&&this.options.prepareFor||("element"==e.appendTo?this.element.insertAfter(b):this.element.appendTo(e.appendTo)),this.element.attr({"data-class":b.prop("className"),"data-id":b.prop("id")}),g[v]=e.constrainWidth?c.outerWidth():"",this.element.css(g),e.hideOnBlur&&(d=function(a){f.stopBlur?a.stopImmediatePropagation():f.hide()},f.timers.bindBlur=setTimeout(function(){f.lastElement.off(f.eventns).on("focusout"+f.eventns+" blur"+f.eventns,d),f.lastElement.getNativeElement().off(f.eventns)},10)),!this.prepared&&a.fn.bgIframe&&this.element.bgIframe(),this.prepared=!0},clear:function(){a(c).off(this.eventns),a(d).off(this.eventns),this.element.off("transitionend"+this.eventns),this.stopBlur=!1,a.each(this.timers,function(a,b){clearTimeout(b)})},hide:function(){var b=a.Event("wspopoverbeforehide");if(this.element.trigger(b),!b.isDefaultPrevented()&&this.isVisible){this.isVisible=!1;var d=this,e=function(b){b&&"transitionend"==b.type&&(b=b.originalEvent)&&b.target==d.element[0]&&"hidden"==d.element.css("visibility")||(d.element.off("transitionend"+d.eventns).css("display","none").attr({"data-id":"","data-class":"",hidden:"hidden"}),clearTimeout(d.timers.forcehide),a(c).off("resize"+d.eventns))};this.clear(),this.element.removeClass("ws-po-visible").trigger("wspopoverhide"),a(c).on("resize"+this.eventns,e),w&&this.element.off("transitionend"+this.eventns).on("transitionend"+this.eventns,e),d.timers.forcehide=setTimeout(e,w?600:40)}},position:function(a){var c=b.getRelOffset(this.element.css({marginTop:0,marginLeft:0,marginRight:0,marginBottom:0}).removeAttr("hidden"),a);c.top+=a.outerHeight(),this.element.css({marginTop:"",marginLeft:"",marginRight:"",marginBottom:""}).css(c)}}),b.validityAlert=function(){var d=b.objectCreate(b.wsPopover,{},f.messagePopover),e=d.hide.bind(d);return d.element.addClass("validity-alert").attr({role:"alert"}),a.extend(d,{hideDelay:5e3,showFor:function(b,c,d,f){b=a(b).getNativeElement(),this.clear(),this.hide(),f||(this.getMessage(b,c),this.show(b),this.hideDelay&&(this.timers.delayedHide=setTimeout(e,this.hideDelay))),d||this.setFocus(b)},setFocus:function(d){var e=a(d).getShadowFocusElement(),f=b.scrollRoot.scrollTop(),g=e.offset().top-30,h=function(){try{e[0].focus()}catch(b){}a(c).triggerHandler("pospopover"+this.eventns)};f>g?b.scrollRoot.animate({scrollTop:g-5},{queue:!1,duration:Math.max(Math.min(600,1.5*(f-g)),80),complete:h}):h()},getMessage:function(a,b){b||(b=a.getErrorMessage()),b?d.contentElement.text(b):this.hide()}}),d}();var x={slide:{show:"slideDown",hide:"slideUp"},fade:{show:"fadeIn",hide:"fadeOut"}};x[f.iVal.fx]||(f.iVal.fx="slide"),b.errorbox={create:function(b,c){c||(c=this.getFieldWrapper(b));var d=a("div.ws-errorbox",c);return d.length||(d=a('<div class="ws-errorbox" hidden="hidden">'),c.append(d)),c.data("errorbox",d),d},getFieldWrapper:function(c){var d;return f.iVal.fieldWrapper&&(d="function"==typeof f.iVal.fieldWrapper?f.iVal.fieldWrapper.apply(this,arguments):a(c).parent().closest(f.iVal.fieldWrapper),d.length||(d=!1,b.error("could not find fieldwrapper: "+f.iVal.fieldWrapper))),d||(d=a(c).parent().closest(":not(span, label, em, strong, b, mark, p)")),d},get:function(b,c){c||(c=this.getFieldWrapper(b));var d=c.data("errorbox");return d?"string"==typeof d&&(d=a("#"+d),c.data("errorbox",d)):d=this.create(b,c),d},addSuccess:function(b,c){var d=a.prop(b,"type"),e=function(){var e=l[d]?a.prop(b,"checked"):a(b).val();c[e?"addClass":"removeClass"]("ws-success")},f=r[d]?"change":"blur";a(b).off(".recheckvalid").on(f+".recheckinvalid",e),e()},hideError:function(b,c){var d=this.getFieldWrapper(b),e=d.data("errorbox");return e&&e.jquery&&(d.removeClass("ws-invalid"),e.message="",a(b).filter("input").off(".recheckinvalid"),e.slideUp(function(){a(this).attr({hidden:"hidden"})})),c||this.addSuccess(b,d),d},recheckInvalidInput:function(b){if(f.iVal.recheckDelay&&f.iVal.recheckDelay>90){var c,d=function(){t({type:"input",target:b})};a(b).filter('input:not([type="checkbox"], [type="radio"])').off(".recheckinvalid").on("input.recheckinvalid",function(){clearTimeout(c),c=setTimeout(d,f.iVal.recheckDelay)})}},showError:function(b,c){var d=this.getFieldWrapper(b),e=this.get(b,d);return e.message!=c&&(e.stop(!0,!0).html("<p>"+c+"</p>"),e.message=c,d.addClass("ws-invalid").removeClass("ws-success"),e.is("[hidden]")&&(this.recheckInvalidInput(b),e.css({display:"none"}).removeAttr("hidden")[x[f.iVal.fx].show]())),d.removeClass("ws-success"),a(b).off(".recheckvalid"),d},reset:function(a){this.hideError(a,!0).removeClass("ws-success")},toggle:function(b){var c=a(b).getErrorMessage();c?this.showError(b,c):this.hideError(b,c)}},a(d.body).on({changedvaliditystate:function(c){if(f.iVal.sel){var d=a(c.target).jProp("form");d.is(f.iVal.sel)&&b.errorbox.toggle(c.target)}},resetvalidityui:function(c){if(f.iVal.sel){var d=a(c.target).jProp("form");d.is(f.iVal.sel)&&b.errorbox.reset(c.target)}},firstinvalid:function(c){if(f.iVal.sel&&f.iVal.handleBubble){var d=a(c.target).jProp("form");d.is(f.iVal.sel)&&(c.preventDefault(),"none"!=f.iVal.handleBubble&&b.validityAlert.showFor(c.target,!1,!1,"hide"==f.iVal.handleBubble))}},submit:function(b){return f.iVal.sel&&a(b.target).is(f.iVal.sel)&&a.prop(b.target,"noValidate")&&!a(b.target).checkValidity()?!1:void 0}}),b.modules["form-core"].getGroupElements=o,h&&540>i&&function(){var b=/^(?:textarea|input)$/i,e=!1;d.addEventListener("contextmenu",function(a){b.test(a.target.nodeName||"")&&(e=a.target.form)&&setTimeout(function(){e=!1},1)},!1),a(c).on("invalid",function(a){a.originalEvent&&e&&e==a.target.form&&(a.wrongWebkitInvalid=!0,a.stopImmediatePropagation())})}()});